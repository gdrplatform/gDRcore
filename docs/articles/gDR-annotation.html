<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="gDRcore">
<title>gDR annotation • gDRcore</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="gDR annotation">
<meta property="og:description" content="gDRcore">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">gDRcore</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.3.4</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/gDRcore.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/gDR-annotation.html">gDR annotation</a>
    <a class="dropdown-item" href="../articles/gDR-data-model.html">gDR -- data model</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/gdrplatform/gDRcore/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>gDR annotation</h1>
                        <h4 data-toc-skip class="author">gDR team</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/gdrplatform/gDRcore/blob/HEAD/../../vignettes/gDR-annotation.Rmd" class="external-link"><code>../../vignettes/gDR-annotation.Rmd</code></a></small>
      <div class="d-none name"><code>gDR-annotation.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="data-annotation-process-for-gdr-pipeline">Data Annotation Process for gDR Pipeline<a class="anchor" aria-label="anchor" href="#data-annotation-process-for-gdr-pipeline"></a>
</h2>
<div class="section level3">
<h3 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h3>
<p>Before running the gDR pipeline, it is essential to annotate the data
properly with drug and cell line information. This document outlines the
process of data annotation and the requirements for the annotation
files.</p>
</div>
<div class="section level3">
<h3 id="annotation-files">Annotation Files<a class="anchor" aria-label="anchor" href="#annotation-files"></a>
</h3>
<p>gDR uses two sources of annotation: drug annotation and cell line
annotation. These annotations are added to a data table before running
the pipeline. The scripts for adding data annotation are located in
<code>R/add_annotation.R</code>, which contains two functions:
<code>add_CellLine_annotation</code> and
<code>add_Drug_annotation</code>. It is recommended to run the
<code>cleanup_metadata</code> function, which adds annotations and
performs some data cleaning.</p>
<div class="section level4">
<h4 id="annotation-file-locations">Annotation File Locations<a class="anchor" aria-label="anchor" href="#annotation-file-locations"></a>
</h4>
<p>Both drug and cell line annotation files are stored in
<code>gDRtestData/inst/annotation_data</code>. There are two files:</p>
<ul>
<li><code>cell_lines.csv</code></li>
<li><code>drugs.csv</code></li>
</ul>
<p>Users can edit these files to add their own annotations. After
updating, it is required to reinstall <code>gDRtestData</code> to use
the new annotations.</p>
<p>Alternatively, users can use other annotation files stored outside of
this package. For this purpose, it is necessary to set two environmental
variables:</p>
<ul>
<li>
<code>GDR_CELLLINE_ANNOTATION</code>: Represents the path to the
cell line annotation CSV file.</li>
<li>
<code>GDR_DRUG_ANNOTATION</code>: Represents the path to the drug
annotation CSV file.</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>GDR_CELLLINE_ANNOTATION <span class="op">=</span> <span class="st">"some/path/to/cell_line_annotation.csv"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>GDR_DRUG_ANNOTATION <span class="op">=</span> <span class="st">"some/path/to/drug_annotation.csv"</span><span class="op">)</span></span></code></pre></div>
<p>NOTE: gDR annotation can be sourced from different locations. Setting
environmental variables with paths for annotation has the highest
priority and will be used as the first source of annotation, even if
other sources are available. To clarify, if both the environmental
variables and the internal annotation databases are set, gDR will
prioritize the environmental variables for annotation.</p>
<p>To turn off the usage of external paths for data annotation, please
set these two environmental variables to empty.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>GDR_CELLLINE_ANNOTATION <span class="op">=</span> <span class="st">""</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>GDR_DRUG_ANNOTATION <span class="op">=</span> <span class="st">""</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="annotation-requirements">Annotation Requirements<a class="anchor" aria-label="anchor" href="#annotation-requirements"></a>
</h3>
<p>gDR has specific requirements for the annotation files to properly
annotate the data.</p>
<div class="section level4">
<h4 id="drug-annotation-requirements">Drug Annotation Requirements<a class="anchor" aria-label="anchor" href="#drug-annotation-requirements"></a>
</h4>
<p>The obligatory fields for drug annotation are:</p>
<ul>
<li>
<code>gnumber</code>: Represents the ID of the drug.</li>
<li>
<code>drug_name</code>: Represents the name of the drug.</li>
<li>
<code>drug_moa</code>: Represents the drug mechanism of action.</li>
</ul>
</div>
<div class="section level4">
<h4 id="cell-line-annotation-requirements">Cell Line Annotation Requirements<a class="anchor" aria-label="anchor" href="#cell-line-annotation-requirements"></a>
</h4>
<p>The obligatory fields for cell line annotation are:</p>
<ul>
<li>
<code>cell_line_identifier</code>: Represents the cell line ID.</li>
<li>
<code>cell_line_name</code>: Represents the name of the cell
line.</li>
<li>
<code>primary_tissue</code>: Represents the primary tissue of the
cell line.</li>
<li>
<code>doubling_time</code>: Represents the doubling time of the cell
line in hours.</li>
<li>
<code>parental_identifier</code>: Represents the name of the
parental cell line.</li>
<li>
<code>subtype</code>: Represents the subtype of the cell line.</li>
</ul>
<p>If some information is not known for the cell line or drug, the
corresponding field should be left empty or NA. Nonetheless, since the
fill parameter is consistently specified in the annotation function, the
default value of ‘unknown’ can be altered by the user.</p>
</div>
</div>
<div class="section level3">
<h3 id="creating-a-data-table-with-annotation">Creating a Data Table with Annotation<a class="anchor" aria-label="anchor" href="#creating-a-data-table-with-annotation"></a>
</h3>
<p>To illustrate, here’s an example of how to create a
<code>data.table</code> with the required fields for drug and cell line
annotation:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Example of creating a data.table with required fields for drug annotation</span></span>
<span><span class="va">drug_annotation</span> <span class="op">&lt;-</span> <span class="fu">data.table</span><span class="op">(</span></span>
<span>  gnumber <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"G1"</span>, <span class="st">"G2"</span>, <span class="st">"G3"</span><span class="op">)</span>,</span>
<span>  drug_name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Drug A"</span>, <span class="st">"Drug B"</span>, <span class="st">"Drug C"</span><span class="op">)</span>,</span>
<span>  drug_moa <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"MOA A"</span>, <span class="st">"MOA B"</span>, <span class="st">"MOA C"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Example of creating a data.table with required fields for cell line annotation</span></span>
<span><span class="va">cell_line_annotation</span> <span class="op">&lt;-</span> <span class="fu">data.table</span><span class="op">(</span></span>
<span>  cell_line_identifier <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Cell_Line_1"</span>, <span class="st">"Cell_Line_2"</span>, <span class="st">"Cell_Line_3"</span><span class="op">)</span>,</span>
<span>  cell_line_name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Cell Line 1"</span>, <span class="st">"Cell Line 2"</span>, <span class="st">"Cell Line 3"</span><span class="op">)</span>,</span>
<span>  primary_tissue <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Tissue A"</span>, <span class="st">"Tissue B"</span>, <span class="st">"Tissue C"</span><span class="op">)</span>,</span>
<span>  doubling_time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">24</span>, <span class="fl">30</span>, <span class="fl">28</span><span class="op">)</span>,</span>
<span>  parental_identifier <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Parental 1"</span>, <span class="st">"Parental 2"</span>, <span class="st">"Parental 3"</span><span class="op">)</span>,</span>
<span>  subtype <span class="op">=</span> <span class="cn">NA</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="additional-information-for-genentechroche-users">Additional Information for Genentech/Roche Users<a class="anchor" aria-label="anchor" href="#additional-information-for-genentechroche-users"></a>
</h3>
<p>For users within Genentech/Roche, we recommend utilizing our internal
annotation databases. We provide the <code>gDRinternal</code> package
specifically for internal users, which includes functions for managing
internal annotation data. If you are an internal user, you can install
the <code>gDRinternal</code> package, and <code>gDRcore</code> will
automatically utilize this package as a source of data annotation.</p>
</div>
<div class="section level3">
<h3 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h3>
<p>Proper annotation of drug and cell line data is crucial for running
the gDR pipeline effectively. By adhering to the annotation requirements
and following the outlined process, users can ensure accurate and
reliable results from the pipeline.</p>
</div>
</div>
<div class="section level2">
<h2 class="unnumbered" id="sessioninfo">SessionInfo<a class="anchor" aria-label="anchor" href="#sessioninfo"></a>
</h2>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/sessionInfo.html" class="external-link">sessionInfo</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; R version 4.3.0 (2023-04-21)</span></span>
<span><span class="co">#&gt; Platform: x86_64-pc-linux-gnu (64-bit)</span></span>
<span><span class="co">#&gt; Running under: Ubuntu 22.04.3 LTS</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Matrix products: default</span></span>
<span><span class="co">#&gt; BLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3 </span></span>
<span><span class="co">#&gt; LAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so;  LAPACK version 3.10.0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; locale:</span></span>
<span><span class="co">#&gt;  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              </span></span>
<span><span class="co">#&gt;  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    </span></span>
<span><span class="co">#&gt;  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   </span></span>
<span><span class="co">#&gt;  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 </span></span>
<span><span class="co">#&gt;  [9] LC_ADDRESS=C               LC_TELEPHONE=C            </span></span>
<span><span class="co">#&gt; [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; time zone: Etc/UTC</span></span>
<span><span class="co">#&gt; tzcode source: system (glibc)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; attached base packages:</span></span>
<span><span class="co">#&gt; [1] stats     graphics  grDevices utils     datasets  methods   base     </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; other attached packages:</span></span>
<span><span class="co">#&gt; [1] BiocStyle_2.30.0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; loaded via a namespace (and not attached):</span></span>
<span><span class="co">#&gt;  [1] vctrs_0.6.5         cli_3.6.3           knitr_1.45         </span></span>
<span><span class="co">#&gt;  [4] rlang_1.1.4         xfun_0.42           stringi_1.8.4      </span></span>
<span><span class="co">#&gt;  [7] purrr_1.0.2         textshaping_0.3.7   jsonlite_1.8.8     </span></span>
<span><span class="co">#&gt; [10] glue_1.7.0          htmltools_0.5.7     ragg_1.2.7         </span></span>
<span><span class="co">#&gt; [13] sass_0.4.8          rmarkdown_2.25      evaluate_0.23      </span></span>
<span><span class="co">#&gt; [16] jquerylib_0.1.4     fastmap_1.1.1       yaml_2.3.8         </span></span>
<span><span class="co">#&gt; [19] lifecycle_1.0.4     memoise_2.0.1       bookdown_0.37      </span></span>
<span><span class="co">#&gt; [22] BiocManager_1.30.22 stringr_1.5.1       compiler_4.3.0     </span></span>
<span><span class="co">#&gt; [25] fs_1.6.3            systemfonts_1.0.5   digest_0.6.34      </span></span>
<span><span class="co">#&gt; [28] R6_2.5.1            magrittr_2.0.3      bslib_0.6.1        </span></span>
<span><span class="co">#&gt; [31] tools_4.3.0         pkgdown_2.0.7       cachem_1.0.8       </span></span>
<span><span class="co">#&gt; [34] desc_1.4.3</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Bartosz Czech, Arkadiusz Gladki, Marc Hafner, Pawel Piatkowski, Natalia Potocka, Dariusz Scigocki, Janina Smola, Sergiu Mocanu, Marcin Kamianowski, Allison Vuong.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
